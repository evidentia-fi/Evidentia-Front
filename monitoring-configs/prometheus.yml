global:
  scrape_interval: 15s
  evaluation_interval: 15s

rule_files:
  - "rules/*.yml"

alerting:
  alertmanagers:
    - static_configs:
        - targets: []

scrape_configs:
  # Prometheus itself
  - job_name: 'prometheus'
    static_configs:
      - targets: ['localhost:9090']

  # OP Geth metrics
  - job_name: 'op-geth'
    static_configs:
      - targets: ['op-geth-sequencer:6060', 'op-geth-replica:6060']
    scrape_interval: 10s
    metrics_path: /debug/metrics/prometheus

  # OP Node metrics
  - job_name: 'op-node'
    static_configs:
      - targets: ['op-node-sequencer:7300', 'op-node-replica:7300']
    scrape_interval: 10s

  # OP Batcher metrics
  - job_name: 'op-batcher'
    static_configs:
      - targets: ['op-batcher:7301']
    scrape_interval: 10s

  # OP Proposer metrics
  - job_name: 'op-proposer'
    static_configs:
      - targets: ['op-proposer:7302']
    scrape_interval: 10s

  # Node exporter (if installed)
  - job_name: 'node-exporter'
    static_configs:
      - targets: ['node-exporter:9100']
    scrape_interval: 15s

  # Blockscout metrics
  - job_name: 'blockscout'
    static_configs:
      - targets: ['blockscout:4000']
    scrape_interval: 30s
    metrics_path: /api/v1/metrics

  # Nginx metrics
  - job_name: 'nginx'
    static_configs:
      - targets: ['nginx:9113']
    scrape_interval: 15s
